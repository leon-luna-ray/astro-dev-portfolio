---
import { fetchProject } from '../../lib/api';

import DetailHeader from '../../components/DetailHeader.vue';
import PageLayout from '../../layouts/PageLayout.astro';
import TechList from '../../components/TechList.vue';
import PortableText from '../../components/PortableText.vue';

const project = await fetchProject(Astro.params.slug || '');

if (!project) {
    return new Response(null, {
        status: 404,
        statusText: 'Not found',
    });
}

console.log(project);
---

<PageLayout title={project.title}>
    <DetailHeader
        title={project.title}
        image={project.mainImage}
        intro={project.intro}
        launchUrl={project.url}
        codeUrl={project.repository}
    />
    <div class='project-details'>
        <div class="description">
            <h2 class="title">Description</h2>
            <PortableText data={project.description} />
        </div>
        <div class='data'>
            <TechList title={'Technologies'} items={project.technologies} />
            <div class="links">
                <h2 class="title">info</h2>

                <ul class="info-list">
                    <li>
                        <span class="label">URL</span>
                        <a href={project?.url} class="value" target="_blank">{project?.url}</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</PageLayout>
